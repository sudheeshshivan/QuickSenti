@(adminHeader : Html,previlageForm : Form[AssignPrevilagesInfo], userSeq : Seq[(String,String)],reports : List[(String,Int,Int)], adminfooter : Html )(implicit request: RequestHeader)

@adminHeader


<section class="content-header">
	<h1>
		Assign Privilages
	</h1>
</section>

<section class="content">            
					
	<div class="row">

		<div class="col col-md-8 col-md-offset-2">

			<div class="box box-primary">

				<div class="box-header">
						<h3 class="box-title">Assign Privilages to User Groups</h3>
				</div>
				<!-- /.box-header -->
				<div class="box-body">

					<div class="row">

						<div class="col col-md-12">

					@if(request.flash.get("error").getOrElse("")!=""){
		              	<div class="alert alert-danger">              
		                	@request.flash.get("error").getOrElse("")
		              	</div>
		            }

		            @if(request.flash.get("success").getOrElse("")!=""){
		              	<div class="alert alert-success">              
		                	@request.flash.get("success").getOrElse("")
		              	</div>
		            }

		            @helper.form(action= routes.UserManager.doAssignUserPrevilages){

						<label for="user-group-field">Select User Group</label>
						@helper.select(
							field = previlageForm("user") , 
							options = userSeq, 
							'_showConstraints -> false, 
							'required -> "required", 
							'class -> "form-control",
							'id -> "user-group-field",
							'onchange -> "loadReportItems(this.value);",
							'_label -> "Select User Group"  
						)

						<div class="col col-sm-6">
						<div class="list-group" id="originalList">

						</div>
						</div>
						<div class="col col-sm-6">
							<div class="list-group" id="newList">
								<span class="list-group-item active" >Selected Datasources</span>
							</div>
						</div>

						<div class="col col-sm-12">
							<input type="submit" class="btn btn-primary pull-right" value="Assign">
						</div>

					}

					</div>

					</div><!-- /.row -->

				</div><!-- /.box-body -->

			</div><!-- /.box -->

		</div> <!-- /.column -->

	</div> <!-- /.row -->

</section>

<script type="text/javascript">
function addItemToList(hashId){
  var newList = document.getElementById("newList");
  var elementId = hashId;
  var currentItem = document.getElementById(elementId);
  var currentButton = document.getElementById("button-"+hashId);
  var hiddenInput = document.createElement("input");
  hiddenInput.setAttribute("type","hidden");
  hiddenInput.setAttribute("name","page[]");
  hiddenInput.setAttribute("id","hidden"+hashId);
  hiddenInput.setAttribute("value",hashId);
  
  currentItem.appendChild(hiddenInput);
  currentButton.setAttribute("onclick","removeItemFromList('"+hashId+"');")
  currentButton.innerHTML = '<span class="glyphicon glyphicon-minus"></span>';
  currentButton.setAttribute("class","btn btn-danger");
  newList.appendChild(currentItem);
}

function removeItemFromList(hashId){
  var originalList = document.getElementById("originalList");
  var elementId = hashId;
  var currentItem = document.getElementById(elementId);
  var currentButton = document.getElementById("button-"+hashId);
  var hiddenInput = document.getElementById("hidden"+hashId);
  currentItem.remove(hiddenInput);
  currentButton.setAttribute("onclick","addItemToList('"+hashId+"');")
  currentButton.innerHTML = '<span class="glyphicon glyphicon-plus"></span>';
  currentButton.setAttribute("class","btn btn-success");
  originalList.appendChild(currentItem);   
}

function loadReportItems(reportType){
	if (reportType==0) { 
		alert("Please Select a valid Report type"); 
		document.getElementById("originalList").innerHTML="";
	}
	else{
		// $.ajax({
		// 	type: 'GET',
		// 	url: '../../../webService/api/read/reportsForPrevilage/'+reportType,
		// 	success: function(result){
		// 		document.getElementById("originalList").innerHTML=result;			
		// 	}
		// });
		$.ajax({
			type: 'GET',
			url: '../../../webService/api/read/datasourceForPrevilage',
			success: function(result){
				document.getElementById("originalList").innerHTML=result;			
			}
		});
	}
}
</script>
<style type="text/css">
dt{
	display :none;
}
</style>

@adminfooter